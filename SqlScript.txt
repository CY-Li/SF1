/*
由 Aqua Data Studio 17.0.1 於 五月-08-2025 12:05:04 上午
 日產生的命令碼資料庫: null
結構描述：<所有結構描述>
*/
CREATE DATABASE rosca2 CHARACTER SET utf8mb4 COLLATE utf8mb4_general_ci;

DROP INDEX `INDEX_announcement_board_1` ON announcement_board;
DROP INDEX `INDEX_apply_deposit_1` ON apply_deposit;
DROP INDEX `INDEX_apply_deposit_2` ON apply_deposit;
DROP INDEX `INDEX_apply_kyc_certification_1` ON apply_kyc_certification;
DROP INDEX `INDEX_apply_kyc_certification_2` ON apply_kyc_certification;
DROP INDEX `INDEX_apply_withdraw_1` ON apply_withdraw;
DROP INDEX `INDEX_apply_withdraw_2` ON apply_withdraw;
DROP INDEX `INDEX_member_balance_1` ON member_balance;
DROP INDEX `INDEX_member_balance_2` ON member_balance;
DROP INDEX `INDEX_member_master_1` ON member_master;
DROP INDEX `INDEX_member_wallet_1` ON member_wallet;
DROP INDEX `INDEX_parameter_category_1` ON parameter_category;
DROP INDEX `INDEX_pending_payment_1` ON pending_payment;
DROP INDEX `INDEX_pending_payment_2` ON pending_payment;
DROP INDEX `INDEX_system_parameter_setting_1` ON system_parameter_setting;
DROP INDEX `INDEX_temp_tender_record_1` ON temp_tender_record;
DROP INDEX `INDEX_tender_activity_record_1` ON tender_activity_record;
DROP INDEX `INDEX_tender_activity_record_2` ON tender_activity_record;
DROP INDEX `INDEX_tender_detail_1` ON tender_detail;
DROP INDEX `INDEX_tender_detail_2` ON tender_detail;
DROP INDEX `INDEX_tender_master_1` ON tender_master;
DROP INDEX `INDEX_tender_master_2` ON tender_master;
DROP INDEX `INDEX_transaction_record_1` ON transaction_record;
DROP INDEX `INDEX_transaction_record_2` ON transaction_record;
DROP INDEX `INDEX_transaction_record_3` ON transaction_record;
ALTER TABLE `member_master`
	DROP INDEX `UNIQUE_member_master_1`;
ALTER TABLE `member_wallet`
	DROP INDEX `UNIQUE_member_wallet_1`;
DROP TABLE `announcement_board`;
DROP TABLE `apply_deposit`;
DROP TABLE `apply_kyc_certification`;
DROP TABLE `apply_withdraw`;
DROP TABLE `lottery_record`;
DROP TABLE `member_balance`;
DROP TABLE `member_master`;
DROP TABLE `member_wallet`;
DROP TABLE `parameter_category`;
DROP TABLE `pending_payment`;
DROP TABLE `system_parameter_setting`;
DROP TABLE `temp_tender_record`;
DROP TABLE `tender_activity_record`;
DROP TABLE `tender_detail`;
DROP TABLE `tender_master`;
DROP TABLE `transaction_record`;
CREATE TABLE `announcement_board`  ( 
	`ab_id`             	bigint(15) AUTO_INCREMENT NOT NULL,
	`ab_title`          	varchar(30) COMMENT '標題'  NOT NULL,
	`ab_content`        	varchar(300) COMMENT '內容'  NULL,
	`ab_image`          	blob COMMENT '公告圖片'  NULL,
	`ab_image_path`     	varchar(200) COMMENT '公告圖片位置，可能只有圖片名或是整個位址'  NULL,
	`ab_image_name`     	varchar(100) NULL,
	`ab_status`         	char(2) COMMENT '10:開啟，20:關閉'  NOT NULL DEFAULT '20',
	`ab_datetime`       	datetime COMMENT '公告時間'  NOT NULL,
	`ab_create_member`  	bigint(15) NOT NULL,
	`ab_create_datetime`	datetime NOT NULL,
	`ab_update_datetime`	bigint(15) NOT NULL,
	`ab_update_member`  	datetime NOT NULL,
	PRIMARY KEY(`ab_id`)
);
CREATE TABLE `apply_deposit`  ( 
	`ad_id`             	bigint(15) AUTO_INCREMENT NOT NULL,
	`ad_mm_id`          	bigint(15) COMMENT '儲值人'  NOT NULL,
	`ad_amount`         	int(15) COMMENT '儲值金額'  NOT NULL,
	`ad_key`            	varchar(200) COMMENT '儲值後得到的KEY(要給我們才查的到)'  NULL,
	`ad_url`            	varchar(200) COMMENT '儲值網址(現在為流水號，利用QR CODE後需要輸入該流水號才能儲值)'  NULL,
	`ad_picture`        	blob COMMENT '圖片(會員儲值會需要QR CODE故這邊新增該欄位)'  NULL,
	`ad_akc_mw_address` 	varchar(150) COMMENT '虛擬錢包地址'  NULL,
	`ad_file_name`      	varchar(100) COMMENT '成功時貼上畫面所需儲存檔名'  NOT NULL,
	`ad_status`         	char(2) COMMENT '申請狀態:10-待會員儲值、11-已匯入儲值金、12-申請駁回、13-匯入失敗'  NOT NULL DEFAULT '0',
	`ad_type`           	char(2) COMMENT '儲值狀態:10-虛擬幣、50-銀行轉帳'  NULL,
	`ad_kyc_id`         	bigint(15) NOT NULL,
	`ad_create_member`  	bigint(15) NOT NULL,
	`ad_create_datetime`	datetime NOT NULL,
	`ad_update_member`  	bigint(15) NOT NULL,
	`ad_update_datetime`	datetime NOT NULL,
	PRIMARY KEY(`ad_id`)
);
CREATE TABLE `apply_kyc_certification`  ( 
	`akc_id`                      	bigint(15) NOT NULL,
	`akc_mm_id`                   	bigint(15) NOT NULL,
	`akc_name`                    	varchar(30) NOT NULL DEFAULT '會員顯示名稱',
	`akc_front`                   	varchar(100) COMMENT '身分證正面'  NOT NULL,
	`akc_back`                    	varchar(100) COMMENT '身分證反面'  NOT NULL,
	`akc_gender`                  	char(1) COMMENT '性別(1:男生、2:女生)'  NOT NULL,
	`akc_personal_id`             	char(10) COMMENT '身分證字號'  NOT NULL,
	`akc_mw_address`              	varchar(150) COMMENT '虛擬錢包地址'  NOT NULL,
	`akc_email`                   	varchar(50) COMMENT '信箱'  NOT NULL,
	`akc_bank_code`               	varchar(10) NOT NULL DEFAULT '銀行代號',
	`akc_bank_account`            	varchar(25) COMMENT '銀行帳號'  NOT NULL,
	`akc_bank_account_name`       	varchar(20) COMMENT '戶名'  NOT NULL,
	`akc_branch`                  	varchar(10) COMMENT '分行'  NOT NULL,
	`akc_beneficiary_name`        	varchar(30) COMMENT '受益人姓名'  NOT NULL,
	`akc_beneficiary_phone`       	varchar(15) COMMENT '受益人電話'  NOT NULL,
	`akc_beneficiary_relationship`	varchar(30) COMMENT '受益人關係'  NOT NULL,
	`akc_status`                  	char(2) COMMENT '申請狀態:10-待認證、20-認證通過、30-認證駁回、40-認證失敗'  NOT NULL,
	`akc_create_member`           	bigint(15) NOT NULL,
	`akc_create_datetime`         	datetime NOT NULL,
	`akc_update_member`           	bigint(15) NOT NULL,
	`akc_update_datetime`         	datetime NOT NULL,
	PRIMARY KEY(`akc_id`)
);
CREATE TABLE `apply_withdraw`  ( 
	`aw_id`             	bigint(15) AUTO_INCREMENT NOT NULL,
	`aw_mm_id`          	bigint(15) COMMENT '申請人ID'  NOT NULL,
	`aw_amount`         	decimal(15,5) COMMENT '申請提領金額'  NOT NULL,
	`aw_key`            	varchar(200) COMMENT '管理者KEY'  NULL,
	`aw_url`            	varchar(200) COMMENT '管理者錢包'  NULL,
	`aw_wallet_address` 	varchar(200) COMMENT '提領錢包地址'  NULL,
	`aw_file_name`      	varchar(100) NULL,
	`aw_status`         	varchar(2) COMMENT '申請狀態:10-待管理者付款、11-已匯入會員錢包、12-申請駁回、13-匯入失敗'  NOT NULL DEFAULT '10',
	`aw_type`           	char(2) COMMENT '10:虛擬幣、50:銀行轉帳'  NULL,
	`aw_kyc_id`         	bigint(15) NOT NULL,
	`aw_create_member`  	bigint(15) NOT NULL,
	`aw_create_datetime`	datetime NOT NULL,
	`aw_update_member`  	bigint(15) NOT NULL,
	`aw_update_datetime`	datetime NOT NULL,
	PRIMARY KEY(`aw_id`)
);
CREATE TABLE `lottery_record`  ( 
	`lr_id`             	bigint(15) AUTO_INCREMENT NOT NULL,
	`lr_tm_id`          	bigint(15) NOT NULL,
	`lr_td_id`          	bigint(15) NOT NULL,
	`lr_td_period`      	int(15) NOT NULL,
	`lr_create_member`  	bigint(15) NOT NULL,
	`lr_create_datetime`	datetime NOT NULL,
	`lr_update_member`  	bigint(15) NOT NULL,
	`lr_update_datetime`	datetime NOT NULL,
	PRIMARY KEY(`lr_id`)
);
CREATE TABLE `member_balance`  ( 
	`mb_id`               	bigint(15) AUTO_INCREMENT NOT NULL,
	`mb_mm_id`            	bigint(15) NOT NULL,
	`mb_payee_mm_id`      	bigint(15) COMMENT '收款人帳號(註冊點數可以轉給其他人)'  NOT NULL,
	`mb_tm_id`            	bigint(15) COMMENT '標案主檔ID'  NOT NULL,
	`mb_td_id`            	bigint(15) COMMENT 'RSOCA 明細檔ID'  NOT NULL,
	`mb_income_type`      	char(1) COMMENT '點數流向:I-收入，O支出(寫入時全大寫，依照mm_id角度)'  NOT NULL,
	`mb_tr_code`          	char(22) COMMENT '自製交易編號'  NOT NULL,
	`mb_tr_type`          	char(2) COMMENT '交易類別:11-下標扣除押金(儲值、註冊) 、12-下標扣除額(儲值、註冊) 、13-下標紅利(紅利:下層下標時給的紅利'  NOT NULL,
	`mb_type`             	char(2) COMMENT '帳務類別， 11-下標扣除押金(儲值、註冊) 、12下標扣除額(儲值、註冊) 、13-下標紅利(紅利:下層下標時給的紅利'  NOT NULL,
	`mb_points_type`      	char(2) COMMENT '這裡會寫入點數類型代號(對應system_parameters:sp_code)，11-儲值點數、12-紅利點數、13-'  NOT NULL,
	`mb_change_points`    	decimal(15,5) COMMENT '點數異動額(點數種類多所以該筆資料會寫入點數類型)'  NOT NULL,
	`mb_points`           	decimal(15,5) COMMENT '點數異動後額度(點數種類多所以該筆資料會寫入點數類型))'  NOT NULL,
	`mb_settlement_period`	int(15) COMMENT '排程已經處理的期數，對應當下tm_settlement_period'  NOT NULL DEFAULT '0',
	`mb_current_period`   	int(15) COMMENT '目前期數(成組時，當下期數，剛寫入就是1)，得標會依據該期數算錢，對應當下tm_current_period'  NOT NULL DEFAULT '0',
	`mb_remark`           	varchar(100) NULL,
	`mb_create_member`    	bigint(15) NOT NULL,
	`mb_create_datetime`  	datetime NOT NULL,
	`mb_update_member`    	bigint(15) NOT NULL,
	`mb_update_datetime`  	datetime NOT NULL,
	PRIMARY KEY(`mb_id`)
);
CREATE TABLE `member_master`  ( 
	`mm_id`                      	bigint(15) NOT NULL,
	`mm_account`                 	varchar(20) COMMENT '帳號(現在為手機號碼)'  NOT NULL,
	`mm_hash_pwd`                	varchar(100) COMMENT '雜湊後密碼'  NOT NULL,
	`mm_2nd_hash_pwd`            	varchar(100) COMMENT '第二組密碼，下單用'  NOT NULL,
	`mm_name`                    	varchar(30) COMMENT '會員顯示名稱'  NOT NULL,
	`mm_introduce_user`          	varchar(10) NULL,
	`mm_introduce_code`          	bigint(15) COMMENT '介紹人'  NOT NULL DEFAULT '0',
	`mm_invite_user`             	varchar(10) NULL,
	`mm_invite_code`             	bigint(15) COMMENT '邀請碼-Invitation code'  NOT NULL DEFAULT '0',
	`mm_gender`                  	char(1) COMMENT '性別(1:男生、2:女生)'  NULL,
	`mm_country_code`            	varchar(10) COMMENT '國碼'  NULL,
	`mm_personal_id`             	char(10) COMMENT '身分證字號'  NULL,
	`mm_phone_number`            	varchar(15) COMMENT '電話號碼(目前手機號碼)'  NULL,
	`mm_mw_address`              	varchar(150) COMMENT '虛擬錢包地址'  NULL,
	`mm_email`                   	varchar(50) COMMENT '信箱'  NULL,
	`mm_bank_code`               	varchar(10) NULL DEFAULT '銀行代號',
	`mm_bank_account`            	varchar(25) COMMENT '銀行帳號'  NULL,
	`mm_bank_account_name`       	varchar(20) COMMENT '戶名'  NULL,
	`mm_branch`                  	varchar(10) COMMENT '分行'  NULL,
	`mm_beneficiary_name`        	varchar(30) NULL DEFAULT '受益人姓名',
	`mm_beneficiary_phone`       	varchar(15) NULL DEFAULT '受益人電話',
	`mm_beneficiary_relationship`	varchar(30) NULL DEFAULT '受益人關係',
	`mm_level`                   	char(1) COMMENT '會員等級(暫時沒用)'  NOT NULL DEFAULT '0',
	`mm_role_type`               	char(1) COMMENT '角色權限:1-使用者、2-管理者'  NOT NULL DEFAULT '1',
	`mm_status`                  	char(1) COMMENT '帳號是否可正常使用'  NOT NULL DEFAULT 'Y',
	`mm_kyc_id`                  	bigint(15) COMMENT '有可能重複更改資料，所以會存目前是哪筆kyc'  NOT NULL DEFAULT '0',
	`mm_kyc`                     	char(1) COMMENT 'KYC認證，沒有認證不能提領'  NOT NULL DEFAULT 'N',
	`mm_create_member`           	bigint(15) NOT NULL,
	`mm_create_datetime`         	datetime NOT NULL,
	`mm_update_member`           	bigint(15) NOT NULL,
	`mm_update_datetime`         	datetime NOT NULL,
	PRIMARY KEY(`mm_id`)
);
CREATE TABLE `member_wallet`  ( 
	`mw_id`              	bigint(15) AUTO_INCREMENT NOT NULL,
	`mw_mm_id`           	bigint(15) COMMENT '會員ID'  NOT NULL,
	`mw_currency`        	varchar(10) COMMENT '貨幣種類'  NULL,
	`mw_address`         	varchar(150) COMMENT '虛擬幣錢包地址'  NULL,
	`mw_subscripts_count`	int(15) COMMENT '下標數(自己)，system_parameters:10'  NOT NULL DEFAULT '0',
	`mw_stored`          	decimal(15,5) COMMENT '儲值點數(可用點數)，system_parameters:11'  NOT NULL DEFAULT '0',
	`mw_reward`          	decimal(15,5) COMMENT '紅利點數，system_parameters:12'  NOT NULL DEFAULT '0',
	`mw_peace`           	decimal(15,5) COMMENT '平安點數，system_parameters:13'  NOT NULL DEFAULT '0',
	`mw_mall`            	decimal(15,5) COMMENT '商城點數，system_parameters:14'  NOT NULL DEFAULT '0',
	`mw_registration`    	decimal(15,5) COMMENT '註冊點數，system_parameters:15'  NOT NULL DEFAULT '0',
	`mw_death`           	decimal(15,5) COMMENT '死會點數，system_parameters:16'  NOT NULL DEFAULT '0',
	`mw_accumulation`    	decimal(15,5) COMMENT '累積獎勵，system_parameters:17'  NOT NULL DEFAULT '0',
	`mw_punish`          	decimal(15,5) COMMENT '懲罰點數，system_parameters:18'  NOT NULL DEFAULT '0',
	`mw_level`           	char(1) NOT NULL DEFAULT '0',
	`mw_create_member`   	bigint(15) NOT NULL,
	`mw_create_datetime` 	datetime NOT NULL,
	`mw_update_member`   	bigint(15) NOT NULL,
	`mw_update_datetime` 	datetime NOT NULL,
	PRIMARY KEY(`mw_id`)
);
CREATE TABLE `parameter_category`  ( 
	`sp_id`             	bigint(15) AUTO_INCREMENT NOT NULL,
	`sp_key`            	varchar(25) COMMENT '查詢參數設定群組用'  NOT NULL,
	`sp_code`           	varchar(25) COMMENT '參數類別'  NOT NULL,
	`sp_name`           	varchar(25) COMMENT '參數名稱'  NOT NULL,
	`sp_description`    	varchar(50) COMMENT '參數解釋'  NULL,
	`sp_create_member`  	bigint(15) NOT NULL,
	`sp_create_datetime`	datetime NOT NULL,
	`sp_update_member`  	bigint(15) NOT NULL,
	`sp_update_datetime`	datetime NOT NULL,
	PRIMARY KEY(`sp_id`)
);
CREATE TABLE `pending_payment`  ( 
	`pp_sn`              	bigint(15) AUTO_INCREMENT NOT NULL,
	`pp_id`              	bigint(15) NOT NULL,
	`pp_mm_id`           	bigint(15) NOT NULL,
	`pp_tr_code`         	char(22) NOT NULL,
	`pp_tm_id`           	bigint(15) NOT NULL,
	`pp_td_id`           	bigint(15) NOT NULL,
	`pp_amount`          	decimal(15,5) COMMENT '待付款金額'  NOT NULL,
	`pp_status`          	char(2) COMMENT '10:欠費、20:已補繳費、30:繳費需處罰'  NOT NULL DEFAULT '0',
	`pp_penalty_datetime`	datetime COMMENT '超過時間繳費就要逞罰'  NOT NULL,
	`pp_create_member`   	bigint(15) NOT NULL,
	`pp_create_datetime` 	datetime NOT NULL,
	`pp_update_member`   	bigint(15) NOT NULL,
	`pp_update_datetime` 	datetime NOT NULL,
	PRIMARY KEY(`pp_sn`)
);
CREATE TABLE `system_parameter_setting`  ( 
	`sps_id`             	bigint(15) AUTO_INCREMENT NOT NULL,
	`sps_code`           	varchar(25) COMMENT '設定編號'  NOT NULL,
	`sps_name`           	varchar(25) COMMENT '設定名稱'  NOT NULL,
	`sps_description`    	varchar(100) COMMENT '參數描述'  NULL,
	`sps_picture`        	blob COMMENT '圖片(會員儲值會需要QR CODE故這邊新增該欄位)'  NULL,
	`sps_parameter01`    	varchar(100) NULL,
	`sps_parameter02`    	varchar(100) NULL,
	`sps_parameter03`    	varchar(100) NULL,
	`sps_parameter04`    	varchar(100) NULL,
	`sps_parameter05`    	varchar(100) NULL,
	`sps_parameter06`    	varchar(100) NULL,
	`sps_parameter07`    	varchar(100) NULL,
	`sps_parameter08`    	varchar(100) NULL,
	`sps_parameter09`    	varchar(100) NULL,
	`sps_parameter10`    	varchar(100) NULL,
	`sps_create_member`  	bigint(15) NOT NULL,
	`sps_create_datetime`	datetime NOT NULL,
	`sps_update_member`  	bigint(15) NOT NULL,
	`sps_update_datetime`	datetime NOT NULL,
	PRIMARY KEY(`sps_id`)
);
CREATE TABLE `temp_tender_record`  ( 
	`ttr_sn`               	bigint(15) AUTO_INCREMENT NOT NULL,
	`ttr_tm_sn`            	bigint(15) NOT NULL,
	`ttr_tm_id`            	bigint(15) NOT NULL,
	`ttr_title`            	varchar(30) COMMENT '標題'  NOT NULL,
	`ttr_detail01`         	varchar(50) COMMENT '標題明細01'  NOT NULL,
	`ttr_detail02`         	varchar(50) COMMENT '標題明細02'  NOT NULL,
	`ttr_detail03`         	varchar(50) COMMENT '標題明細03'  NOT NULL,
	`ttr_detail04`         	varchar(50) COMMENT '標題明細04'  NOT NULL,
	`ttr_top`              	varchar(25) COMMENT '會首'  NOT NULL,
	`ttr_owner`            	varchar(25) COMMENT '標會擁有者'  NOT NULL,
	`ttr_phone`            	varchar(25) COMMENT '標會電話'  NOT NULL,
	`ttr_address`          	varchar(100) COMMENT '標會記錄地址'  NOT NULL,
	`ttr_tm_group_datetime`	datetime COMMENT '標會成組時間'  NOT NULL,
	`ttr_detail`           	longtext COMMENT '標會成組紀錄'  NOT NULL,
	`ttr_create_datetime`  	datetime NOT NULL,
	PRIMARY KEY(`ttr_sn`)
);
CREATE TABLE `tender_activity_record`  ( 
	`tar_id`               	bigint(15) AUTO_INCREMENT NOT NULL,
	`tar_mm_id`            	bigint(15) COMMENT '操作人(下標人、得標人)'  NOT NULL,
	`tar_mm_introduce_code`	bigint(15) NULL DEFAULT '0',
	`tar_tm_id`            	bigint(15) NOT NULL,
	`tar_tm_count`         	int(15) COMMENT '這裡指的不是總數量，而是一次下標的會數'  NOT NULL,
	`tar_tr_type`          	char(2) COMMENT '交易類別:11-下標扣除押金(儲值、註冊) 、12-下標扣除額(儲值、註冊) 、13-下標紅利(紅利:下層下標時給的紅利'  NOT NULL,
	`tar_tr_code`          	char(22) NOT NULL,
	`tar_status`           	int(15) COMMENT '標案活動紀錄狀態，0:未處理、1已經處理'  NOT NULL DEFAULT '0',
	`tar_json`             	longtext COMMENT '下標邀請組織列表(invitation_org)該欄位存放json值，供排成好處理、'  NULL,
	`tar_create_member`    	bigint(15) NOT NULL,
	`tar_create_datetime`  	datetime NOT NULL,
	`tar_update_member`    	bigint(15) NOT NULL,
	`tar_update_datetime`  	datetime NOT NULL,
	PRIMARY KEY(`tar_id`)
);
CREATE TABLE `tender_detail`  ( 
	`td_id`                	bigint(15) AUTO_INCREMENT COMMENT 'RSOCA 明細檔ID (Rotating Savings and Credit Association ID_民間互助'  NOT NULL,
	`td_tm_id`             	bigint(15) COMMENT 'RSOCA 主檔ID (Rotating Savings and Credit Association ID_民間互助會'  NOT NULL,
	`td_participants`      	bigint(15) COMMENT '參加者mm_id'  NULL,
	`td_sequence`          	int(15) COMMENT '標案明細序列(用來方便做查找)'  NOT NULL DEFAULT '0',
	`td_period`            	int(15) COMMENT '該標中標期數'  NOT NULL DEFAULT '0',
	`td_status`            	char(1) COMMENT '下標狀態'  NOT NULL DEFAULT '0',
	`td_pp_id`             	varchar(367) COMMENT '如果成組後每期扣錢沒扣到就會寫入pending_payment'  NULL,
	`td_pp_penalty_count`  	int(15) COMMENT '逞罰次數'  NOT NULL DEFAULT '0',
	`td_pp_paid`           	int(15) COMMENT '是否都已繳費，如果有未繳費就不是0'  NOT NULL DEFAULT '0',
	`td_tm_initiator_mm_id`	bigint(15) COMMENT '發起者mm_id=tm_initiator_mm_id'  NOT NULL,
	`td_create_member`     	bigint(15) NOT NULL,
	`td_create_datetime`   	datetime NOT NULL,
	`td_update_member`     	bigint(15) NOT NULL,
	`td_update_datetime`   	datetime NOT NULL,
	PRIMARY KEY(`td_id`)
);
CREATE TABLE `tender_master`  ( 
	`tm_id`                 	bigint(15) COMMENT 'RSOCA 主檔ID (Rotating Savings and Credit Association ID_民間互助會'  NOT NULL,
	`tm_sn`                 	bigint(15) NOT NULL DEFAULT '0',
	`tm_name`               	varchar(25) COMMENT '標會名稱'  NOT NULL,
	`tm_ticks`              	varchar(20) COMMENT '取得時間加字串(暫時沒用，用來記錄時間點)'  NOT NULL,
	`tm_initiator_mm_id`    	bigint(15) COMMENT '發起人mm_id'  NOT NULL,
	`tm_type`               	char(1) COMMENT '標會種類:A-一般玩法(散會:可以選下標數)、B-4人玩法(6會)、C-2人玩法(12會)、D-1人玩法(24會)'  NOT NULL,
	`tm_bidder`             	varchar(150) COMMENT '下標人會用|串接，EX:1|2|3'  NULL,
	`tm_winners`            	varchar(150) COMMENT '得獎者會用|串接，EX:1|2|3'  NULL,
	`tm_settlement_period`  	int(15) COMMENT '排程已經處理的期數'  NOT NULL DEFAULT '1',
	`tm_current_period`     	int(15) COMMENT '目前期數(成組時，當下期數，剛寫入就是1)，得標會依據該期數算錢'  NOT NULL DEFAULT '0',
	`tm_status`             	char(1) COMMENT '是否成組:0-未成組,1-成組,2-結束'  NOT NULL DEFAULT '0',
	`tm_count`              	int(15) COMMENT '用來簡單判斷是否成組'  NOT NULL DEFAULT '0',
	`tm_settlement_datetime`	datetime COMMENT '排程查資料查過這個時間就要處理'  NULL,
	`tm_win_first_datetime` 	datetime COMMENT '第一次開標時間'  NULL,
	`tm_win_end_datetime`   	datetime COMMENT '此組最後一次開標時間'  NULL,
	`tm_group_datetime`     	datetime COMMENT '成組時間'  NULL,
	`tm_create_member`      	bigint(15) NOT NULL,
	`tm_create_datetime`    	datetime NOT NULL,
	`tm_update_member`      	bigint(15) NOT NULL,
	`tm_update_datetime`    	datetime NOT NULL,
	PRIMARY KEY(`tm_id`)
);
CREATE TABLE `transaction_record`  ( 
	`tr_id`               	bigint(15) AUTO_INCREMENT NOT NULL,
	`tr_code`             	char(22) COMMENT '自製交易編號'  NOT NULL,
	`tr_mm_id`            	bigint(15) COMMENT '下標人mm_id'  NOT NULL,
	`tr_payee_mm_id`      	bigint(15) COMMENT '收款人帳號(註冊點數可以轉給其他人)'  NOT NULL,
	`tr_tm_id`            	bigint(15) NOT NULL,
	`tr_td_id`            	bigint(15) COMMENT 'RSOCA 明細檔ID'  NOT NULL,
	`tr_pp_id`            	bigint(15) COMMENT '如果成組後每期扣錢沒扣到就會寫入pending_payment'  NOT NULL DEFAULT '0',
	`tr_type`             	char(2) COMMENT '交易類別:11-下標扣除押金(儲值、註冊) 、12-下標扣除額(儲值、註冊) 、13-下標紅利(紅利:下層下標時給的紅利'  NOT NULL DEFAULT '1',
	`tr_status`           	char(2) COMMENT '交易狀態:30-待清算(入紅利點數欄位，tr_type:13、16) 、50-已清算(代表該交易最後狀態，tr_type'  NOT NULL,
	`tr_settlement_time`  	datetime COMMENT 'tr_type:13、16會需要看時間來結算所以會由大於這個時間的直接做結算會比較方便'  NULL,
	`tr_mm_points`        	decimal(15,5) COMMENT '儲值點數(每標8000在這邊錢會是固定的，死會後會補10000)'  NOT NULL,
	`tr_income_type`      	char(1) COMMENT '點數流向:I-收入，O支出(寫入時全大寫，依照mm_id角度)'  NOT NULL,
	`tr_settlement_period`	int(15) COMMENT '排程已經處理的期數，對應當下tm_settlement_period'  NOT NULL DEFAULT '0',
	`tr_current_period`   	int(15) COMMENT '目前期數(成組時，當下期數，剛寫入就是1)，得標會依據該期數算錢，對應當下tm_current_period'  NOT NULL DEFAULT '0',
	`tr_remark`           	varchar(100) NULL,
	`tr_create_member`    	bigint(15) NOT NULL,
	`tr_create_datetime`  	datetime NOT NULL,
	`tr_update_member`    	bigint(15) NOT NULL,
	`tr_update_datetime`  	datetime NOT NULL,
	PRIMARY KEY(`tr_id`)
);
ALTER TABLE `member_master`
	ADD CONSTRAINT `UNIQUE_member_master_1`
	UNIQUE (`mm_account`);
ALTER TABLE `member_wallet`
	ADD CONSTRAINT `UNIQUE_member_wallet_1`
	UNIQUE (`mw_mm_id`);
CREATE INDEX `INDEX_announcement_board_1`
	ON `announcement_board`(`ab_id` DESC);
CREATE INDEX `INDEX_apply_deposit_1`
	ON `apply_deposit`(`ad_mm_id` DESC);
CREATE INDEX `INDEX_apply_deposit_2`
	ON `apply_deposit`(`ad_status`);
CREATE INDEX `INDEX_apply_kyc_certification_1`
	ON `apply_kyc_certification`(`akc_mm_id`);
CREATE INDEX `INDEX_apply_kyc_certification_2`
	ON `apply_kyc_certification`(`akc_status`);
CREATE INDEX `INDEX_apply_withdraw_1`
	ON `apply_withdraw`(`aw_mm_id`);
CREATE INDEX `INDEX_apply_withdraw_2`
	ON `apply_withdraw`(`aw_status`);
CREATE INDEX `INDEX_member_balance_1`
	ON `member_balance`(`mb_mm_id`);
CREATE INDEX `INDEX_member_balance_2`
	ON `member_balance`(`mb_mm_id`, `mb_points_type`);
CREATE INDEX `INDEX_member_master_1`
	ON `member_master`(`mm_account`);
CREATE INDEX `INDEX_member_wallet_1`
	ON `member_wallet`(`mw_mm_id`);
CREATE INDEX `INDEX_parameter_category_1`
	ON `parameter_category`(`sp_key`);
CREATE INDEX `INDEX_pending_payment_1`
	ON `pending_payment`(`pp_id` DESC);
CREATE INDEX `INDEX_pending_payment_2`
	ON `pending_payment`(`pp_mm_id`, `pp_status`);
CREATE INDEX `INDEX_system_parameter_setting_1`
	ON `system_parameter_setting`(`sps_code`);
CREATE INDEX `INDEX_temp_tender_record_1`
	ON `temp_tender_record`(`ttr_tm_sn` DESC);
CREATE INDEX `INDEX_tender_activity_record_1`
	ON `tender_activity_record`(`tar_tr_code` DESC);
CREATE INDEX `INDEX_tender_activity_record_2`
	ON `tender_activity_record`(`tar_status`);
CREATE INDEX `INDEX_tender_detail_1`
	ON `tender_detail`(`td_tm_id`);
CREATE INDEX `INDEX_tender_detail_2`
	ON `tender_detail`(`td_participants`);
CREATE INDEX `INDEX_tender_master_1`
	ON `tender_master`(`tm_group_datetime` DESC);
CREATE INDEX `INDEX_tender_master_2`
	ON `tender_master`(`tm_status`);
CREATE INDEX `INDEX_transaction_record_1`
	ON `transaction_record`(`tr_mm_id`);
CREATE INDEX `INDEX_transaction_record_2`
	ON `transaction_record`(`tr_mm_id`, `tr_type` DESC);
CREATE INDEX `INDEX_transaction_record_3`
	ON `transaction_record`(`tr_mm_id`);
