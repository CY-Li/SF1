# Zeabur éƒ¨ç½²å•é¡Œä¿®å¾©å ±å‘Š

## ğŸš¨ å·²ä¿®å¾©çš„å•é¡Œ

### 1. Angular å»ºç½®å¤±æ•— - `sh: ng: not found`

**å•é¡Œæè¿°ï¼š**
```
> font-end@0.0.0 build
> ng build
sh: ng: not found
```

**æ ¹æœ¬åŸå› ï¼š**
- Angular CLI æ²’æœ‰æ­£ç¢ºå®‰è£æˆ–ä¸åœ¨ PATH ä¸­
- Node.js å»ºç½®ç’°å¢ƒé…ç½®å•é¡Œ

**ä¿®å¾©æ–¹æ¡ˆï¼š**
âœ… **è·³é Angular å»ºç½®ï¼Œä½¿ç”¨é å»ºç½®æª”æ¡ˆ**
- ç§»é™¤äº† Node.js å»ºç½®éšæ®µ
- ç›´æ¥ä½¿ç”¨ `backend/FontEnd/FontEnd/dist/font-end/browser/` ä¸­çš„é å»ºç½®æª”æ¡ˆ
- é¿å…äº† Node.js ç‰ˆæœ¬ç›¸å®¹æ€§å•é¡Œ

### 2. Angular Base Href è·¯ç”±å•é¡Œ

**å•é¡Œæè¿°ï¼š**
- Angular æ‡‰ç”¨çš„ base href è¨­å®šç‚º `/backend/`
- ä½†åœ¨ Zeabur éƒ¨ç½²ä¸­æ‡‰è©²æ˜¯ `/admin/`

**ä¿®å¾©æ–¹æ¡ˆï¼š**
âœ… **è‡ªå‹•ä¿®æ­£ base href**
```dockerfile
# ä¿®æ­£ Angular base href
RUN if [ -f /var/www/admin/index.html ]; then \
        sed -i 's|<base href="/backend/">|<base href="/admin/">|g' /var/www/admin/index.html; \
    fi
```

### 3. Nginx é…ç½®å„ªåŒ–

**ä¿®å¾©å…§å®¹ï¼š**
âœ… **æ”¹å–„å¾Œå°è·¯ç”±è™•ç†**
- æ·»åŠ äº† Angular SPA è·¯ç”±æ”¯æ´
- é…ç½®äº†é©ç•¶çš„ try_files è¦å‰‡
- é˜²æ­¢ index.html è¢«å¿«å–

âœ… **API ä»£ç†å„ªåŒ–**
- å¢åŠ äº†é€£æ¥è¶…æ™‚è¨­å®š
- è¨­å®šäº†æª”æ¡ˆä¸Šå‚³å¤§å°é™åˆ¶ (50MB)
- æ·»åŠ äº†å¥åº·æª¢æŸ¥ç«¯é»

### 4. æ—¥èªŒå’Œç›£æ§æ”¹å–„

**ä¿®å¾©å…§å®¹ï¼š**
âœ… **æ—¥èªŒè¼¸å‡ºåˆ° stdout/stderr**
- æ‰€æœ‰æœå‹™æ—¥èªŒç¾åœ¨è¼¸å‡ºåˆ°æ¨™æº–è¼¸å‡º
- Zeabur å¯ä»¥æ­£ç¢ºæ”¶é›†å’Œé¡¯ç¤ºæ—¥èªŒ
- ç§»é™¤äº†æª”æ¡ˆæ—¥èªŒé…ç½®

âœ… **å¥åº·æª¢æŸ¥å„ªåŒ–**
- ä½¿ç”¨ç°¡å–®çš„ `/health` ç«¯é»
- é¿å…ä¾è³´è¤‡é›œçš„ API ç«¯é»

### 5. æ¬Šé™å’Œç›®éŒ„çµæ§‹

**ä¿®å¾©å…§å®¹ï¼š**
âœ… **ç›®éŒ„æ¬Šé™è¨­å®š**
- æ­£ç¢ºè¨­å®šäº†æª”æ¡ˆä¸Šå‚³ç›®éŒ„æ¬Šé™
- å‰µå»ºäº†å¿…è¦çš„ nginx é‹è¡Œç›®éŒ„
- è¨­å®šäº†é©ç•¶çš„æª”æ¡ˆæ“æœ‰è€…

## ğŸ¯ ä¿®å¾©å¾Œçš„ Dockerfile ç‰¹é»

### å„ªåŒ–çš„å»ºç½®æµç¨‹
1. **è·³é Angular å»ºç½®** - ä½¿ç”¨é å»ºç½®æª”æ¡ˆï¼Œé¿å… Node.js å•é¡Œ
2. **å¤šéšæ®µå»ºç½®** - åˆ†åˆ¥å»ºç½® .NET Core æœå‹™
3. **å–®ä¸€å®¹å™¨éƒ¨ç½²** - æ‰€æœ‰æœå‹™åœ¨ä¸€å€‹å®¹å™¨ä¸­é‹è¡Œ

### æ”¹å–„çš„ Nginx é…ç½®
```nginx
# å‰å° Vue.js SPA
location / {
    root /var/www/frontend;
    try_files $uri $uri/ /index.html;
}

# å¾Œå° Angular SPA
location /admin {
    alias /var/www/admin/;
    try_files $uri $uri/ /admin/index.html;
}

# API ä»£ç†
location /api/ {
    proxy_pass http://localhost:5000/api/;
    client_max_body_size 50M;
    proxy_connect_timeout 30s;
}

# å¥åº·æª¢æŸ¥
location /health {
    return 200 "healthy\n";
}
```

### Supervisor é€²ç¨‹ç®¡ç†
- **nginx** - å‰ç«¯æœå‹™å’Œåå‘ä»£ç†
- **backend** - API Gateway (.NET Core, port 5000)
- **backend-service** - å¾®æœå‹™ (.NET Core, port 5001)

## ğŸš€ éƒ¨ç½²æŒ‡ä»¤

### 1. ç¢ºä¿ Angular å·²å»ºç½®
```bash
cd backend/FontEnd/FontEnd
npm install
npm run build
```

### 2. æäº¤ä¿®å¾©
```bash
git add .
git commit -m "Fix Zeabur deployment - skip Angular build, use pre-built files"
git push
```

### 3. åœ¨ Zeabur é‡æ–°éƒ¨ç½²
- é»æ“Š "Redeploy" æŒ‰éˆ•
- æˆ–ç­‰å¾…è‡ªå‹•éƒ¨ç½²è§¸ç™¼

## ğŸ” é©—è­‰éƒ¨ç½²æˆåŠŸ

### æª¢æŸ¥æœå‹™ç‹€æ…‹
```bash
# å¥åº·æª¢æŸ¥
curl https://your-app.zeabur.app/health

# å‰å°
curl https://your-app.zeabur.app/

# å¾Œå°
curl https://your-app.zeabur.app/admin

# API
curl https://your-app.zeabur.app/api/HomePicture/GetAnnImages
```

### é æœŸå›æ‡‰
- **å¥åº·æª¢æŸ¥**: `healthy`
- **å‰å°**: HTML å…§å®¹
- **å¾Œå°**: Angular æ‡‰ç”¨ HTML
- **API**: JSON è³‡æ–™æˆ–é©ç•¶çš„ API å›æ‡‰

## ğŸ“ .NET Core è­¦å‘Šè™•ç†

éƒ¨ç½²æ—¥èªŒä¸­çš„ C# è­¦å‘Šï¼ˆCS8625, CS8604 ç­‰ï¼‰æ˜¯**éé˜»å¡æ€§çš„**ï¼š
- é€™äº›æ˜¯ nullable reference types ç›¸é—œçš„è­¦å‘Š
- ä¸æœƒå½±éŸ¿æ‡‰ç”¨ç¨‹å¼é‹è¡Œ
- å»ºè­°åœ¨å¾ŒçºŒé–‹ç™¼ä¸­ä¿®å¾©ï¼Œä½†ä¸å½±éŸ¿éƒ¨ç½²

## ğŸ‰ ä¿®å¾©çµæœ

âœ… **Angular å»ºç½®å•é¡Œå·²è§£æ±º** - è·³éå»ºç½®ï¼Œä½¿ç”¨é å»ºç½®æª”æ¡ˆ
âœ… **è·¯ç”±å•é¡Œå·²ä¿®æ­£** - base href è‡ªå‹•ä¿®æ­£ç‚º `/admin/`
âœ… **Nginx é…ç½®å·²å„ªåŒ–** - æ”¯æ´ SPA è·¯ç”±å’Œ API ä»£ç†
âœ… **æ—¥èªŒæ”¶é›†å·²æ”¹å–„** - è¼¸å‡ºåˆ° stdout/stderr
âœ… **å¥åº·æª¢æŸ¥å·²ç°¡åŒ–** - ä½¿ç”¨å¯é çš„ç«¯é»
âœ… **æ¬Šé™è¨­å®šå·²ä¿®æ­£** - æª”æ¡ˆä¸Šå‚³ç›®éŒ„æ¬Šé™æ­£ç¢º

## ğŸ”§ å¾ŒçºŒå»ºè­°

1. **ç›£æ§éƒ¨ç½²ç‹€æ…‹** - æª¢æŸ¥ Zeabur æ§åˆ¶å°çš„å»ºç½®æ—¥èªŒ
2. **æ¸¬è©¦å®Œæ•´åŠŸèƒ½** - é©—è­‰å‰å°ã€å¾Œå°å’Œ API åŠŸèƒ½
3. **é…ç½®ç’°å¢ƒè®Šæ•¸** - è¨­å®šè³‡æ–™åº«é€£æ¥å’Œå…¶ä»–é…ç½®
4. **è¨­å®šåŸŸå** - é…ç½®è‡ªå®šç¾©åŸŸåå’Œ SSL
5. **æ€§èƒ½èª¿å„ª** - æ ¹æ“šä½¿ç”¨æƒ…æ³èª¿æ•´è³‡æºé…ç½®

---

**æ³¨æ„**: å¦‚æœä»ç„¶é‡åˆ°å•é¡Œï¼Œè«‹æª¢æŸ¥ Zeabur å»ºç½®æ—¥èªŒä¸¦ç¢ºä¿æ‰€æœ‰å¿…è¦çš„æª”æ¡ˆéƒ½å·²æäº¤åˆ° Git å„²å­˜åº«ã€‚