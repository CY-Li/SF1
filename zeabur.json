{
  "name": "rosca-system",
  "services": {
    "backend-service": {
      "build": {
        "dockerfile": "backendAPI/DotNetBackEndCleanArchitecture/Presentation/DotNetBackEndService/Dockerfile"
      },
      "name": "backend-service",
      "env": {
        "ASPNETCORE_ENVIRONMENT": "Production",
        "ASPNETCORE_URLS": "http://+:5001",
        "ConnectionStrings__BackEndDatabase": "Server=${DB_HOST};Port=${DB_PORT};User Id=${DB_USER};Password=${DB_PASSWORD};Database=${DB_NAME};CharSet=utf8mb4;AllowUserVariables=True;UseAffectedRows=False;",
        "JWT__SecretKey": "${JWT_SECRET_KEY}",
        "JWT__Issuer": "${JWT_ISSUER}",
        "JWT__Audience": "${JWT_AUDIENCE}",
        "JWT__ExpiryMinutes": "${JWT_EXPIRY_MINUTES}",
        "Serilog__MinimumLevel__Default": "${LOG_LEVEL}",
        "TZ": "Asia/Taipei"
      },
      "resources": {
        "memory": "512Mi",
        "cpu": "0.5"
      }
    },
    "api-gateway": {
      "build": {
        "dockerfile": "backendAPI/DotNetBackEndCleanArchitecture/Dockerfile"
      },
      "name": "api-gateway",
      "env": {
        "ASPNETCORE_ENVIRONMENT": "Production",
        "ASPNETCORE_URLS": "http://+:5000",
        "ConnectionStrings__BackEndDatabase": "Server=${DB_HOST};Port=${DB_PORT};User Id=${DB_USER};Password=${DB_PASSWORD};Database=${DB_NAME};CharSet=utf8mb4;AllowUserVariables=True;UseAffectedRows=False;",
        "ConnectionStrings__DefaultConnection": "Server=${DB_HOST};Port=${DB_PORT};User Id=${DB_USER};Password=${DB_PASSWORD};Database=${DB_NAME};CharSet=utf8mb4;AllowUserVariables=True;UseAffectedRows=False;",
        "APIUrl": "http://backend-service:5001/",
        "JWT__SecretKey": "${JWT_SECRET_KEY}",
        "JWT__Issuer": "${JWT_ISSUER}",
        "JWT__Audience": "${JWT_AUDIENCE}",
        "JWT__ExpiryMinutes": "${JWT_EXPIRY_MINUTES}",
        "CORS__AllowedOrigins": "${CORS_ALLOWED_ORIGINS}",
        "FileUpload__MaxFileSize": "${FILE_UPLOAD_MAX_SIZE}",
        "FileUpload__AllowedExtensions": "${FILE_UPLOAD_EXTENSIONS}",
        "Hangfire__DashboardEnabled": "${HANGFIRE_DASHBOARD_ENABLED}",
        "Serilog__MinimumLevel__Default": "${LOG_LEVEL}",
        "TZ": "Asia/Taipei"
      },
      "volumes": [
        {
          "name": "uploads",
          "dir": "/app/uploads",
          "size": "5GB"
        },
        {
          "name": "kyc-images",
          "dir": "/app/KycImages",
          "size": "2GB"
        },
        {
          "name": "deposit-images",
          "dir": "/app/DepositImages",
          "size": "2GB"
        },
        {
          "name": "withdraw-images",
          "dir": "/app/WithdrawImages",
          "size": "2GB"
        },
        {
          "name": "ann-images",
          "dir": "/app/AnnImagessss",
          "size": "2GB"
        }
      ],
      "resources": {
        "memory": "512Mi",
        "cpu": "0.5"
      }
    },
    "frontend": {
      "build": {
        "dockerfile": "frontend/Dockerfile"
      },
      "name": "frontend",
      "env": {
        "TZ": "Asia/Taipei"
      },
      "resources": {
        "memory": "256Mi",
        "cpu": "0.25"
      }
    },
    "admin": {
      "build": {
        "dockerfile": "backend/FontEnd/Dockerfile"
      },
      "name": "admin",
      "env": {
        "TZ": "Asia/Taipei"
      },
      "resources": {
        "memory": "256Mi",
        "cpu": "0.25"
      }
    }
  },
  "domains": [
    {
      "name": "frontend",
      "service": "frontend"
    },
    {
      "name": "admin",
      "service": "admin"
    }
  ]
}