{
  "ConnectionStrings": {
    "BackEndDatabase": "Server=${ZEABUR_MARIADB_CONNECTION_HOST};Port=${ZEABUR_MARIADB_CONNECTION_PORT};User Id=${DB_USER};Password=${DB_PASSWORD};Database=${DB_NAME};CharSet=utf8mb4;AllowUserVariables=True;UseAffectedRows=False;ConnectionTimeout=30;CommandTimeout=60;Pooling=true;MinimumPoolSize=5;MaximumPoolSize=100;ConnectionLifeTime=300;"
  },
  "DatabaseConfiguration": {
    "Provider": "MariaDB",
    "Version": "11.3.2",
    "CharacterSet": "utf8mb4",
    "Collation": "utf8mb4_general_ci",
    "TimeZone": "Asia/Taipei",
    "EnableRetryOnFailure": true,
    "MaxRetryCount": 3,
    "MaxRetryDelay": "00:00:30",
    "EnableSensitiveDataLogging": false,
    "EnableDetailedErrors": false
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft.AspNetCore": "Warning",
        "Microsoft.EntityFrameworkCore": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "./logs/backend-service-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 7,
          "outputTemplate": "[{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": ["FromLogContext", "WithMachineName", "WithThreadId"]
  },
  "AllowedHosts": "*",
  "JwtSettings": {
    "ValidateIssuer": true,
    "Issuer": "${JWT_ISSUER}",
    "ValidateAudience": true,
    "Audience": "${JWT_AUDIENCE}",
    "ValidateLifetime": true,
    "Expires": "${JWT_EXPIRY_MINUTES}",
    "SecurityKey": "${JWT_SECRET_KEY}",
    "ValidateIssuerSigningKey": true
  },
  "CORS": {
    "AllowedOrigins": "${CORS_ALLOWED_ORIGINS}",
    "AllowedMethods": ["GET", "POST", "PUT", "DELETE", "OPTIONS"],
    "AllowedHeaders": ["Content-Type", "Authorization", "X-Requested-With"],
    "AllowCredentials": true,
    "MaxAge": 86400
  },
  "RootFolderPath": "/app/uploads",
  "RootGuid": "822dcfe5-c563-4b41-8dd2-9ce130202a9d",
  "KycFolderPath": "/app/KycImages",
  "KycGuid": "6c9aee0c-5ab7-45be-b7b4-95eafa3596a8",
  "AnnFolderPath": "/app/AnnImagessss",
  "AnnGuid": "a39d806f-7463-4fd4-947f-7f81295b4213",
  "AnnBoardFolderPath": "/app/AnnBoardImages",
  "AnnBoardGuid": "d133fef2-4a53-43a8-874c-d66c9e7d7acb",
  "BlooperFolderPath": "/app/BlooperImages",
  "BlooperGuid": "3dc70f6d-d41a-44a6-a460-aa16b37662fe",
  "DepositFolderPath": "/app/DepositImages",
  "DepositGuid": "3dc70f6d-d41a-44a6-a460-aa16b37662fe",
  "WithdrawrFolderPath": "/app/WithdrawImages",
  "WithdrawGuid": "3dc70f6d-d41a-44a6-a460-aa16b37662fe",
  "FileUpload": {
    "MaxFileSize": "${FILE_UPLOAD_MAX_SIZE}",
    "AllowedExtensions": "${FILE_UPLOAD_EXTENSIONS}",
    "UploadPath": "/app/uploads",
    "KycImagesPath": "/app/KycImages",
    "DepositImagesPath": "/app/DepositImages",
    "WithdrawImagesPath": "/app/WithdrawImages",
    "AnnouncementImagesPath": "/app/AnnImagessss",
    "LogsPath": "/app/logs",
    "EnableCompression": true,
    "EnableEncryption": false,
    "EnableVirusScanning": true,
    "RetentionSettings": {
      "UploadRetentionDays": 365,
      "KycImageRetentionDays": -1,
      "DepositImageRetentionDays": 1095,
      "WithdrawImageRetentionDays": 1095,
      "AnnouncementImageRetentionDays": 730,
      "LogRetentionDays": 30
    },
    "TypeLimits": {
      "KycImageExtensions": [".jpg", ".jpeg", ".png"],
      "KycImageMaxSize": 5242880,
      "DepositImageExtensions": [".jpg", ".jpeg", ".png", ".pdf"],
      "DepositImageMaxSize": 5242880,
      "WithdrawImageExtensions": [".jpg", ".jpeg", ".png", ".pdf"],
      "WithdrawImageMaxSize": 5242880,
      "AnnouncementImageExtensions": [".jpg", ".jpeg", ".png", ".gif"],
      "AnnouncementImageMaxSize": 3145728,
      "LogExtensions": [".log", ".txt", ".json"],
      "LogMaxSize": 104857600
    },
    "SecuritySettings": {
      "EnableContentValidation": true,
      "EnableFileNameSanitization": true,
      "EnableAccessLogging": true,
      "ForbiddenExtensions": [".exe", ".bat", ".cmd", ".com", ".pif", ".scr", ".vbs", ".js", ".jar", ".asp", ".aspx", ".php", ".jsp", ".sh", ".ps1", ".py", ".rb", ".pl"],
      "MaxFileNameLength": 255,
      "AllowOverwrite": false
    }
  },
  "HealthChecks": {
    "Enabled": true,
    "Path": "/health",
    "DetailedOutput": true,
    "Checks": {
      "Database": {
        "Enabled": true,
        "Timeout": "00:00:30"
      }
    }
  },
  "ZeaburConfiguration": {
    "Environment": "Production",
    "ServiceDiscovery": {
      "MariaDBHost": "${ZEABUR_MARIADB_CONNECTION_HOST}",
      "MariaDBPort": "${ZEABUR_MARIADB_CONNECTION_PORT}",
      "BackendServiceDomain": "${ZEABUR_BACKEND_SERVICE_DOMAIN}",
      "BackendDomain": "${ZEABUR_BACKEND_DOMAIN}",
      "FrontendDomain": "${ZEABUR_FRONTEND_DOMAIN}",
      "AdminDomain": "${ZEABUR_ADMIN_DOMAIN}"
    },
    "Resources": {
      "Memory": "512Mi",
      "CPU": "0.5"
    },
    "Scaling": {
      "MinReplicas": 1,
      "MaxReplicas": 3,
      "TargetCPUUtilization": 70
    }
  },
  "Security": {
    "RequireHttps": true,
    "HstsMaxAge": 31536000,
    "ContentSecurityPolicy": "default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; img-src 'self' data: https:; font-src 'self' data:;",
    "ReferrerPolicy": "strict-origin-when-cross-origin",
    "PermissionsPolicy": "geolocation=(), microphone=(), camera=()"
  }
}