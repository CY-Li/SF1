# Zeabur 部署環境變數配置範例
# 複製此檔案為 .env.zeabur 並填入實際值

# ===========================================
# MariaDB 資料庫配置
# ===========================================
# 資料庫基本設定
DB_NAME=rosca_db
DB_USER=rosca_user
DB_PASSWORD=your_secure_database_password_here
DB_ROOT_PASSWORD=your_secure_root_password_here

# MariaDB 容器環境變數
MYSQL_DATABASE=${DB_NAME}
MYSQL_USER=${DB_USER}
MYSQL_PASSWORD=${DB_PASSWORD}
MYSQL_ROOT_PASSWORD=${DB_ROOT_PASSWORD}

# 字符集和排序規則設定
MYSQL_CHARACTER_SET_SERVER=utf8mb4
MYSQL_COLLATION_SERVER=utf8mb4_general_ci

# 時區設定
TZ=Asia/Taipei

# 資料庫連接字串 (由應用程式使用)
# 注意：DB_HOST 會由 Zeabur 自動設定為 MariaDB 服務的內部域名
DB_HOST=mariadb-service
DB_PORT=3306

# 完整連接字串配置
CONNECTION_STRING=Server=${DB_HOST};Port=${DB_PORT};User Id=${DB_USER};Password=${DB_PASSWORD};Database=${DB_NAME};CharSet=utf8mb4;AllowUserVariables=True;UseAffectedRows=False;ConnectionTimeout=30;CommandTimeout=60;Pooling=true;MinimumPoolSize=5;MaximumPoolSize=100;ConnectionLifeTime=300;

# Zeabur 服務發現連接字串 (生產環境使用)
ZEABUR_CONNECTION_STRING=Server=${ZEABUR_MARIADB_CONNECTION_HOST};Port=${ZEABUR_MARIADB_CONNECTION_PORT};User Id=${DB_USER};Password=${DB_PASSWORD};Database=${DB_NAME};CharSet=utf8mb4;AllowUserVariables=True;UseAffectedRows=False;ConnectionTimeout=30;CommandTimeout=60;Pooling=true;MinimumPoolSize=5;MaximumPoolSize=100;ConnectionLifeTime=300;

# ===========================================
# 應用程式環境配置
# ===========================================
ASPNETCORE_ENVIRONMENT=Production

# ===========================================
# JWT 認證配置
# ===========================================
JWT_SECRET_KEY=your-super-secret-jwt-key-change-in-production-min-32-chars
JWT_ISSUER=ROSCA-API
JWT_AUDIENCE=ROSCA-Client
JWT_EXPIRY_MINUTES=60

# ===========================================
# CORS 跨域配置
# ===========================================
# 請將 your-app 替換為實際的 Zeabur 應用程式名稱
CORS_ALLOWED_ORIGINS=https://your-app.zeabur.app,https://your-app-admin.zeabur.app

# ===========================================
# 檔案上傳配置
# ===========================================
# 基本檔案上傳設定
FILE_UPLOAD_MAX_SIZE=10485760
FILE_UPLOAD_EXTENSIONS=.jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.xls,.xlsx

# 存儲路徑配置
UPLOADS_PATH=/app/uploads
KYC_IMAGES_PATH=/app/KycImages
DEPOSIT_IMAGES_PATH=/app/DepositImages
WITHDRAW_IMAGES_PATH=/app/WithdrawImages
ANN_IMAGES_PATH=/app/AnnImagessss
LOGS_PATH=/app/logs

# 檔案大小限制 (位元組)
KYC_IMAGE_MAX_SIZE=5242880
DEPOSIT_IMAGE_MAX_SIZE=5242880
WITHDRAW_IMAGE_MAX_SIZE=5242880
ANN_IMAGE_MAX_SIZE=3145728
LOG_MAX_SIZE=104857600

# 檔案類型限制
KYC_IMAGE_EXTENSIONS=.jpg,.jpeg,.png
DEPOSIT_IMAGE_EXTENSIONS=.jpg,.jpeg,.png,.pdf
WITHDRAW_IMAGE_EXTENSIONS=.jpg,.jpeg,.png,.pdf
ANN_IMAGE_EXTENSIONS=.jpg,.jpeg,.png,.gif
LOG_EXTENSIONS=.log,.txt,.json

# 檔案保留設定 (天數，-1 表示永久保留)
UPLOAD_RETENTION_DAYS=365
KYC_IMAGE_RETENTION_DAYS=-1
DEPOSIT_IMAGE_RETENTION_DAYS=1095
WITHDRAW_IMAGE_RETENTION_DAYS=1095
ANN_IMAGE_RETENTION_DAYS=730
LOG_RETENTION_DAYS=30

# 安全設定
FILE_UPLOAD_ENABLE_COMPRESSION=true
FILE_UPLOAD_ENABLE_ENCRYPTION=false
FILE_UPLOAD_ENABLE_VIRUS_SCANNING=true
FILE_UPLOAD_ENABLE_CONTENT_VALIDATION=true
FILE_UPLOAD_ENABLE_FILENAME_SANITIZATION=true
FILE_UPLOAD_ENABLE_ACCESS_LOGGING=true
FILE_UPLOAD_MAX_FILENAME_LENGTH=255
FILE_UPLOAD_ALLOW_OVERWRITE=false

# ===========================================
# 功能開關配置
# ===========================================
HANGFIRE_DASHBOARD_ENABLED=true

# ===========================================
# 日誌配置
# ===========================================
LOG_LEVEL=Information

# ===========================================
# Zeabur 服務發現變數 (自動設定，無需修改)
# ===========================================
# 這些變數由 Zeabur 自動提供，用於服務間通信
# ZEABUR_MARIADB_CONNECTION_HOST=mariadb-service-host
# ZEABUR_MARIADB_CONNECTION_PORT=3306
# ZEABUR_BACKEND_SERVICE_DOMAIN=backend-service-domain
# ZEABUR_BACKEND_DOMAIN=backend-domain
# ZEABUR_FRONTEND_DOMAIN=frontend-domain
# ZEABUR_ADMIN_DOMAIN=admin-domain

# ===========================================
# 安全注意事項
# ===========================================
# 1. JWT_SECRET_KEY 必須至少 32 個字符長度
# 2. 資料庫密碼應使用強密碼，包含大小寫字母、數字和特殊字符
# 3. 在生產環境中，請勿使用預設值
# 4. 定期更換敏感資訊如 JWT 密鑰和資料庫密碼
# 5. CORS_ALLOWED_ORIGINS 應只包含信任的域名

# ===========================================
# 部署後配置檢查清單
# ===========================================
# □ 確認所有環境變數都已設定
# □ 驗證資料庫連接正常
# □ 測試 JWT 認證功能
# □ 檢查檔案上傳功能
# □ 驗證 CORS 設定
# □ 測試服務間通信
# □ 檢查日誌輸出正常