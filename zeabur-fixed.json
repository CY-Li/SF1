{
  "name": "rosca-system",
  "services": {
    "app": {
      "build": {
        "dockerfile": "Dockerfile"
      },
      "name": "rosca-app",
      "env": {
        "ASPNETCORE_ENVIRONMENT": "Production",
        "ConnectionStrings__BackEndDatabase": "Server=rosca-mariadb;Port=3306;User Id=root;Password=rosca_root_2024!;Database=zeabur;CharSet=utf8mb4;AllowUserVariables=True;UseAffectedRows=False;ConnectionTimeout=60;Pooling=true;MinimumPoolSize=5;MaximumPoolSize=100;ConnectionLifeTime=300;ConnectRetryCount=3;ConnectRetryInterval=10;",
        "ConnectionStrings__DefaultConnection": "Server=rosca-mariadb;Port=3306;User Id=root;Password=rosca_root_2024!;Database=zeabur;CharSet=utf8mb4;AllowUserVariables=True;UseAffectedRows=False;ConnectionTimeout=60;Pooling=true;MinimumPoolSize=5;MaximumPoolSize=100;ConnectionLifeTime=300;ConnectRetryCount=3;ConnectRetryInterval=10;",
        "JWT__SecretKey": "your-super-secret-jwt-key-at-least-32-characters-long-2024",
        "JWT__Issuer": "ROSCA-API",
        "JWT__Audience": "ROSCA-Client",
        "JWT__ExpiryMinutes": "60",
        "CORS__AllowedOrigins": "https://sf-test.zeabur.app",
        "FileUpload__MaxFileSize": "52428800",
        "FileUpload__AllowedExtensions": ".jpg,.jpeg,.png,.gif,.pdf",
        "Hangfire__DashboardEnabled": "true",
        "Serilog__MinimumLevel__Default": "Information",
        "TZ": "Asia/Taipei"
      },
      "volumes": [
        {
          "name": "uploads",
          "dir": "/app/uploads",
          "size": "5GB"
        },
        {
          "name": "kyc-images",
          "dir": "/app/KycImages",
          "size": "2GB"
        },
        {
          "name": "deposit-images",
          "dir": "/app/DepositImages",
          "size": "2GB"
        },
        {
          "name": "withdraw-images",
          "dir": "/app/WithdrawImages",
          "size": "2GB"
        },
        {
          "name": "ann-images",
          "dir": "/app/AnnImagessss",
          "size": "2GB"
        },
        {
          "name": "logs",
          "dir": "/app/logs",
          "size": "1GB"
        }
      ],
      "depends_on": [
        "mariadb"
      ]
    },
    "mariadb": {
      "template": "mariadb:11.3.2",
      "name": "rosca-mariadb",
      "env": {
        "MYSQL_ROOT_PASSWORD": "rosca_root_2024!",
        "MYSQL_DATABASE": "zeabur",
        "MYSQL_USER": "root",
        "MYSQL_PASSWORD": "rosca_root_2024!",
        "MYSQL_CHARACTER_SET_SERVER": "utf8mb4",
        "MYSQL_COLLATION_SERVER": "utf8mb4_general_ci",
        "TZ": "Asia/Taipei"
      },
      "volumes": [
        {
          "name": "db-data",
          "dir": "/var/lib/mysql",
          "size": "10GB"
        }
      ],
      "configs": [
        {
          "path": "/docker-entrypoint-initdb.d/01-schema.sql",
          "template": "./zeabur-complete-database-init.sql"
        },
        {
          "path": "/docker-entrypoint-initdb.d/02-create-user.sql",
          "template": "./zeabur-create-appuser.sql"
        }
      ],
      "resources": {
        "memory": "512Mi",
        "cpu": "0.5"
      },
      "healthcheck": {
        "test": [
          "CMD",
          "mysqladmin",
          "ping",
          "-h",
          "localhost",
          "-u",
          "root",
          "-p$MYSQL_ROOT_PASSWORD"
        ],
        "interval": "30s",
        "timeout": "10s",
        "retries": 3,
        "start_period": "60s"
      }
    }
  }
}